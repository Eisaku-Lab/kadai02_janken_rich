<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width">
  <script src="js/jquery-2.1.3.min.js"></script>
  <link rel="stylesheet" href="css/sample.css">
  <title>ã˜ã‚ƒã‚“ã‘ã‚“</title>
</head>

<body>

  <header>
    <h1>é™å®šã˜ã‚ƒã‚“ã‘ã‚“
    </h1>
    <h5 class="subtitle">
      ãƒ«ãƒ¼ãƒ«ï¼šã‚°ãƒ¼ãƒ»ãƒãƒ§ã‚­ãƒ»ãƒ‘ãƒ¼ãã‚Œãã‚Œ2å›ãšã¤å‡ºã›ã¾ã™<br>
      â˜…ãŒ0ã«ãªã£ãŸæ–¹ã®è² ã‘ã§ã™
    </h5>
  </header>

  <main>
    <div class="game_status">
      <div class="player-card">
        <h3 class="player_status">
          ğŸ‘¤ ã‚ãªãŸ
        </h3>
        <div class="star-display">
          â˜…ï¼š<span id="player_star" class="star-count">2</span>
        </div>
        <div class="hand-counter">
          <div class="hand-item">
            <span class="hand-emoji">âœŠ</span>
            <div class="dots">
              <span class="dot" data-hand="gu" data-player="player" data-index="1">â—</span>
              <span class="dot" data-hand="gu" data-player="player" data-index="2">â—</span>
            </div>
          </div>
          <div class="hand-item">
            <span class="hand-emoji">âœŒï¸</span>
            <div class="dots">
              <span class="dot" data-hand="cho" data-player="player" data-index="1">â—</span>
              <span class="dot" data-hand="cho" data-player="player" data-index="2">â—</span>
            </div>
          </div>
          <div class="hand-item">
            <span class="hand-emoji">âœ‹</span>
            <div class="dots">
              <span class="dot" data-hand="par" data-player="player" data-index="1">â—</span>
              <span class="dot" data-hand="par" data-player="player" data-index="2">â—</span>
            </div>
          </div>
        </div>
      </div>

      <div class="vs-badge">VS</div>

      <div class="computer-card">
        <h3 id="computer_status">
          ğŸ¤– ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿
        </h3>
        <div class="star-display">
          â˜…ï¼š<span id="computer_star" class="star-count">2</span>
        </div>
        <div class="hand-counter">
          <div class="hand-item">
            <span class="hand-emoji">âœŠ</span>
            <div class="dots">
              <span class="dot" data-hand="gu" data-player="computer" data-index="1">â—</span>
              <span class="dot" data-hand="gu" data-player="computer" data-index="2">â—</span>
            </div>
          </div>
          <div class="hand-item">
            <span class="hand-emoji">âœŒï¸</span>
            <div class="dots">
              <span class="dot" data-hand="cho" data-player="computer" data-index="1">â—</span>
              <span class="dot" data-hand="cho" data-player="computer" data-index="2">â—</span>
            </div>
          </div>
          <div class="hand-item">
            <span class="hand-emoji">âœ‹</span>
            <div class="dots">
              <span class="dot" data-hand="par" data-player="computer" data-index="1">â—</span>
              <span class="dot" data-hand="par" data-player="computer" data-index="2">â—</span>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="computer-hand-area">
      <h3 id="computer-hand" class="computer-hand-title">
        ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ã®æ‰‹
      </h3>
      <div id="computer-hand-img" class="computer-hand-img">
        <div class="question-mark">â“</div>
      </div>
    </div>

    <div id="judgment" class="judgment-default">ã˜ã‚ƒã‚“ã‘ã‚“ã®æ‰‹ã‚’é¸ã‚“ã§ãã ã•ã„</div>

    <ul class="hand-buttons">
      <li id="gu_btn" class="hand-btn" data-hand="gu">
        <div class="btn-content">
          <img src="./img/gu.jpg" class="hand-img" alt="ã‚°ãƒ¼">
          <div class="btn-label">
            ã‚°ãƒ¼
          </div>
        </div>
      </li>
      <li id="cho_btn" class="hand-btn" data-hand="cho">
        <div class="btn-content">
          <img src="./img/choki.jpg" class="hand-img" alt="ãƒãƒ§ã‚­">
          <div class="btn-label">ãƒãƒ§ã‚­</div>
        </div>
      </li>
      <li id="par_btn" class="hand-btn" data-hand="par">
        <div class="btn-content">
          <img src="./img/par.jpg" class="hand-img" alt="ãƒ‘ãƒ¼">
          <div class="btn-label">ãƒ‘ãƒ¼</div>
        </div>
      </li>
    </ul>
  </main>

  <footer></footer>
  <script>
    //ã˜ã‚ƒã‚“ã‘ã‚“ç”¨ã®SCRIPTã‚’æ›¸ã„ã¦ãã ã•ã„

    //æ˜Ÿã¨æ‰‹æœ­//
    let playerStar = 2; //ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã®æ˜Ÿ
    let computerStar = 2; //ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ã®æ˜Ÿ
    let playcard = [0, 2, 2, 2] //ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã®ã‚«ãƒ¼ãƒ‰[ä½¿ã‚ãªã„,ã‚°ãƒ¼,ãƒãƒ§ã‚­,ãƒ‘ãƒ¼]
    let computercard = [0, 2, 2, 2] //ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã®ã‚«ãƒ¼ãƒ‰[ä½¿ã‚ãªã„,ã‚°ãƒ¼,ãƒãƒ§ã‚­,ãƒ‘ãƒ¼]
    let gameover = false;


    //ã˜ã‚ƒã‚“ã‘ã‚“ãƒœã‚¿ãƒ³æŠ¼ä¸‹//
    $("#gu_btn").on("click", function () { //ã‚°ãƒ¼ãƒœã‚¿ãƒ³ã‚’æŠ¼ã™//


      const r = Math.ceil(Math.random() * 3); //1ã€œ3ã®ã©ã‚Œã‹ã®æ•°å­—ã‚’ç”Ÿæˆ
      if (computercard[1] >= 1 && r == 1) {
        $("#computer-hand-img").html('<img src="./img/gu.jpg" width="300" height="300">'); //1ã®ãã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ã¯ã‚°ãƒ¼//
        $("#judgment").html("ã‚ã„ã“"); //çµæœã¯ã‚ã„ã“//
        playcard[1] = playcard[1] - 1;
        computercard[1] = computercard[1] - 1;
      }

      if (computercard[2] >= 1 && r == 2) {
        $("#computer-hand-img").html('<img src="./img/choki.jpg" width="300" height="300">');
        $("#judgment").html("å‹ã¡");
        computerStar = computerStar - 1;
        playcard[1] = playcard[1] - 1;
        computercard[2] = computercard[2] - 1;
      }

      if (computercard[3] >= 1 && r == 3) {
        $("#computer-hand-img").html('<img src="./img/par.jpg" width="300" height="300">');
        $("#judgment").html("è² ã‘");
        playerStar = playerStar - 1;
        playcard[1] = playcard[1] - 1;
        computercard[3] = computercard[3] - 1;
      }

      //ã‚«ãƒ¼ãƒ‰ã®æ¶ˆè²»
      // playcard[g] = playcard[g] - 1;
      // computercard[r] = computercard[r] - 1;

      //ç”»é¢æ›´æ–°
      update();

    })

    $("#cho_btn").on("click", function () { //ã‚°ãƒ¼ãƒœã‚¿ãƒ³ã‚’æŠ¼ã™//


      const r = Math.ceil(Math.random() * 3); //1ã€œ3ã®ã©ã‚Œã‹ã®æ•°å­—
      if (computercard[1] >= 1 && r == 1) {
        $("#computer-hand-img").html('<img src="./img/gu.jpg" width="300" height="300">');
        $("#judgment").html("è² ã‘");
        playerStar = playerStar - 1;
        playcard[2] = playcard[2] - 1;
        computercard[1] = computercard[1] - 1;
      }
      if (computercard[2] >= 1 && r == 2) {
        $("#computer-hand-img").html('<img src="./img/choki.jpg" width="300" height="300">');
        $("#judgment").html("ã‚ã„ã“");
        playcard[2] = playcard[2] - 1;
        computercard[2] = computercard[2] - 1;
      }
      if (computercard[3] >= 1 && r == 3) {
        $("#computer-hand-img").html('<img src="./img/par.jpg" width="300" height="300">');
        $("#judgment").html("å‹ã¡");
        computerStar = computerStar - 1;
        playcard[2] = playcard[2] - 1;
        computercard[3] = computercard[3] - 1;
      }

      //ã‚«ãƒ¼ãƒ‰ã®æ¶ˆè²»
      // playcard[g] = playcard[g] - 1;
      // computercard[r] = computercard[r] - 1;

      //ç”»é¢æ›´æ–°
      update();

    })

    $("#par_btn").on("click", function () { //ã‚°ãƒ¼ãƒœã‚¿ãƒ³ã‚’æŠ¼ã™//


      const r = Math.ceil(Math.random() * 3); //1ã€œ3ã®ã©ã‚Œã‹ã®æ•°å­—
      if (computercard[1] >= 1 && r == 1) {
        $("#computer-hand-img").html('<img src="./img/gu.jpg" width="300" height="300">');
        $("#judgment").html("å‹ã¡");
        computerStar = computerStar - 1;
        playcard[3] = playcard[3] - 1;
        computercard[1] = computercard[1] - 1;
      }
      if (computercard[2] >= 1 && r == 2) {
        $("#computer-hand-img").html('<img src="./img/choki.jpg" width="300" height="300">');
        $("#judgment").html("è² ã‘");
        playerStar = playerStar - 1;
        playcard[3] = playcard[3] - 1;
        computercard[2] = computercard[2] - 1;
      }
      if (computercard[3] >= 1 && r == 3) {
        $("#computer-hand-img").html('<img src="./img/par.jpg" width="300" height="300">');
        $("#judgment").html("ã‚ã„ã“");
        playcard[3] = playcard[3] - 1;
        computercard[3] = computercard[3] - 1;
      }

      //ã‚«ãƒ¼ãƒ‰ã®æ¶ˆè²»
      // playcard[g] = playcard[g] - 1;
      // computercard[r] = computercard[r] - 1;

      //ç”»é¢æ›´æ–°
      update();

    })

    function update() {
      $("#player_star").text(playerStar);
      $("#computer_star").text(computerStar);

      // ãƒœã‚¿ãƒ³ã®æœ‰åŠ¹/ç„¡åŠ¹ã‚’æ›´æ–°
      function updateButtons() {
        $("#gu_btn").toggleClass("disabled", playcard[1] <= 0 || gameover);
        $("#cho_btn").toggleClass("disabled", playcard[2] <= 0 || gameover);
        $("#par_btn").toggleClass("disabled", playcard[3] <= 0 || gameover);
      }

      // ãƒ‰ãƒƒãƒˆã®è¡¨ç¤ºã‚’æ›´æ–°
      function updateDots() {
        // ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼
        $('[data-player="player"][data-hand="gu"]').each(function (i) {
          $(this).toggleClass("used", i >= playcard[1]);
        });
        $('[data-player="player"][data-hand="cho"]').each(function (i) {
          $(this).toggleClass("used", i >= playcard[2]);
        });
        $('[data-player="player"][data-hand="par"]').each(function (i) {
          $(this).toggleClass("used", i >= playcard[3]);
        });

        // ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿
        $('[data-player="computer"][data-hand="gu"]').each(function (i) {
          $(this).toggleClass("used", i >= computercard[1]);
        });
        $('[data-player="computer"][data-hand="cho"]').each(function (i) {
          $(this).toggleClass("used", i >= computercard[2]);
        });
        $('[data-player="computer"][data-hand="par"]').each(function (i) {
          $(this).toggleClass("used", i >= computercard[3]);
        });
      }


      if (computerStar == 0) {
        $("#judgment").html("ğŸ‰ è©¦åˆçµ‚äº†ï¼šã‚ãªãŸã®å‹åˆ©ã§ã™ï¼ ğŸ‰");
        gameover = true;
      }

      if (playerStar == 0) {
        $("#judgment").html("ğŸ˜¢ è©¦åˆçµ‚äº†ï¼šã‚ãªãŸã®è² ã‘ã§ã™ ğŸ˜¢");
        gameover = true;
      }


      // ãƒ‰ãƒƒãƒˆè¡¨ç¤ºã‚’æ›´æ–°
      updateDots();

      // ãƒœã‚¿ãƒ³ã®æœ‰åŠ¹/ç„¡åŠ¹ã‚’æ›´æ–°
      updateButtons();


    }



  </script>
</body>

</html>